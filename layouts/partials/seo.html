{{- .Scratch.Set "permalink" .Permalink -}}
{{- if .Pages -}}
  {{/*
        Hugo doesn't generate permalinks for lists with the page number in them,
        which makes all the pages of a list look lik the same page to a search
        engine, which is bad.
  */}}

  {{- $by := .Params.pageBy | default .Site.Params.pageBy | default "default" -}}
  {{- $limit := .Site.Params.pageLimit | default 10 -}}

  {{- if (eq .Site.Params.pageBy "newest") -}}
    {{- $paginator := .Paginate .Pages.ByDate.Reverse $limit -}}
    {{- .Scratch.Set "paginator" $paginator -}}
  {{- else if (eq .Site.Params.pageBy "title") -}}
    {{- $paginator := .Paginate .Pages.ByTitle $limit -}}
    {{- .Scratch.Set "paginator" $paginator -}}
  {{- else -}}
    {{- $paginator := .Paginate $limit -}}
    {{- .Scratch.Set "paginator" $paginator -}}
  {{- end -}}

  {{- $paginator := .Scratch.Get "paginator" -}}
  {{- if (gt $paginator.PageNumber 1) -}}
    {{ .Scratch.Set "permalink" ($paginator.URL | absURL) }}
  {{- end -}}

  {{ with $paginator.Prev -}}
    <link rel="prev" href="{{ .URL | absURL}}" />
  {{- end }}
  {{ with $paginator.Next -}}
    <link rel="next" href="{{ .URL | absURL}}" />
  {{- end }}
{{- end -}}

  {{ $permalink := .Scratch.Get "permalink" }}
  <link rel="canonical" href="{{ $permalink }}">

  {{ if .RSSLink -}}
    <link href="{{ .RSSLink }}" rel="alternate" type="application/rss+xml" title="{{ .Title }}  | Rancher Labs" />
  {{- end }}

  <meta name="description" content="{{ .Description }}"/>
  <meta name="robots" content="noodp"/>

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:description" content="{{ .Description }}" />
  <meta name="twitter:title" content="{{ .Title }}" />
  <meta name="twitter:site" content="{{ .Site.Params.twitter }}" />
  <meta name="twitter:creator" content="{{ .Site.Params.twitter }}" />

  <!-- OG data -->
  <meta property="og:locale" content="en_US" />
  <meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}" />
  <meta property="og:title" content="{{ .Title }}">
  <meta property="og:description" content="{{ .Description }}">
  <meta property="og:url" content="{{ $permalink }}" />
  <meta property="og:site_name" content="{{ .Site.Title }}" />
  <meta property="og:image" content="{{ if .Params.image }}{{ . }}{{ else }}{{.Site.BaseURL}}/img/logo-square.png{{ end }}" />
  {{ range .Params.categories }}<meta property="article:section" content="{{ . }}" />{{ end }}
  {{ if isset .Params "date" }}<meta property="article:published_time" content="{{ time .Date }}" />{{ end }}

{{- if .IsHome -}}
  <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "WebSite",
    "url": "{{ $permalink }}",
    "name": "{{ .Site.Title }}",
     "author": {
        "@type": "Organization",
        "name": "Rancher Labs"
      },
    "description": "{{ .Site.Params.description }}"
  }
  </script>
{{- else if .IsPage -}}
  <script type="application/ld+json">
  {{- if eq .Section "post" -}}
    {
      "@context": "http://schema.org",
      "@type": "BlogPosting",
      "headline": "{{ .Title }}",
      "genre": "{{ range .Params.categories }}{{ . }}{{ end }}",
      "url": "{{ $permalink }}",
      "datePublished": "{{ time .Date }}",
      {{ with index .Site.Data.authors .Params.author }}
        "author": {
            "@type": "Person",
            "name": "{{ .name }}"
        },
      {{ end }}
      "description": "{{ .Description }}"
    }
  {{- else -}}
    {
      "@context": "http://schema.org",
      "@type": "WebSite",
      "url": "{{ $permalink }}",
      "name": "{{ .Title }}",
      {{ if .Params.author -}}
        {{ $author := (index .Site.Data.authors .Params.author) }}
        "author": {
            "@type": "Person",
            "name": "{{ $author.name }}"
        },
      {{- else }}
        "author": {
          "@type": "Organization",
          "name": "Rancher Labs"
        },
      {{- end }}
      "description": "{{ .Site.Params.description }}"
    }
  {{- end -}}
  </script>
{{ end }}

<!--百度-->

<script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?e7f396eab41150efddce20ad0637a94d";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
</script>
